<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Weigamer • Productos</title>
  <link rel="stylesheet" href="assets/css/style.css"/>
  <script defer src="assets/js/app.js"></script>
  <script defer src="assets/js/validation.js"></script>
</head>

<body>
  <div class="container">
    <h1>Productos</h1>
    <p class="subtitle">Lista completa de consolas en venta.</p>
    <div class="grid products" id="products"></div>
  </div>


  <script>
    function seedProducts(){
      const p = [
        {id:'SWITCH-OLED', name:'Nintendo Switch OLED', price:349.99, category:'Actual', stock:15, img:'assets/img/oled.png', desc:'Consola híbrida con pantalla OLED 7”.'},
        {id:'PS5-SLIM', name:'PlayStation 5 Slim', price:499.99, category:'Actual', stock:10, img:'assets/img/slim.png', desc:'Gráficos de última generación y SSD ultrarrápido.'},
        {id:'XSX', name:'Xbox Series X', price:499.99, category:'Actual', stock:9, img:'assets/img/seriesx.png', desc:'Potencia de sobremesa con 4K sólido.'},
        {id:'GBA-SP', name:'Game Boy Advance SP', price:129.99, category:'Retro', stock:7, img:'assets/img/boy.png', desc:'Portátil clásica retroiluminada, plegable.'},
        {id:'N64', name:'Nintendo 64', price:159.00, category:'Retro', stock:5, img:'assets/img/64.png', desc:'Mítica consola de 64 bits.'},
        {id:'PS2', name:'PlayStation 2', price:149.00, category:'Retro', stock:8, img:'assets/img/play2.png', desc:'La consola más vendida de la historia.'}
      ];
      localStorage.setItem('weigamer_products', JSON.stringify(p));
      return p;
    }

    document.addEventListener('DOMContentLoaded', () => {
      const products = seedProducts(); // la corro desde aquí
      const wrap = document.getElementById('products');

      wrap.innerHTML = products.map(prod => `
        <article class="card product">
          <img src="${prod.img}" alt="${prod.name}"/>
          <h3>${prod.name}</h3>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <span class="badge">${prod.category}</span>
            <b>${prod.price.toFixed(2)} USD</b>
          </div>
          <div class="actions">
            <button class="btn" data-add="${prod.id}">Añadir</button>
            <a class="btn secondary" href="product.html?id=${encodeURIComponent(prod.id)}">Ver</a>
          </div>
        </article>
      `).join('');

      wrap.addEventListener('click', (e) => {
        const btn = e.target.closest('[data-add]');
        if (btn) addToCart(btn.getAttribute('data-add'), 1);
      });
    });
  </script>
</body>
</html>
